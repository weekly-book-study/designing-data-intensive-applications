## 메시지팩(Message Pack)

- Json 데이터를 부호화하는 방식
- 메시지팩에서 데이터 타입과 길이를 표현하는 방식은 다양한 프리픽스(prefix)를 사용하여 이루어짐
    - **정수**
        - `0x00`(=0)부터 `0x7f`(=31)는 양의 작은 정수를 나타냄
        - `0xd0` -> 8비트 음의 정수, `0xd1` -> 16비트 음의 정수 .. **`0xd2, 0xd3`**
            - ex. `0xd0` 는 -128 ~ -1를 표현 가능하다.
                - -128 d080(16진수) ~ -1 ff (최적화를 위함)
        - `0xcc`~`0xcf` → 각각 8비트, 16비트, 32비트, 64비트 양의 정수
    - **실수**
        - 고정된 프리픽스를 사용
            - **`0xca`** = 32비트 부동 소수점
            - **`0xcb` =**  64비트 부동 소수점
    - **문자열**
        - 문자열의 길이에 따라 다르게 표현
            - 0~31바이트 길이 - `0xa0`(=0) -> `0xbf`(=31)
                
                ```python
                {
                 '0xa0': 0,
                 '0xa1': 1,
                 '0xa2': 2,
                 '0xa3': 3,
                 '0xa4': 4,
                 '0xa5': 5,
                 '0xa6': 6,
                 '0xa7': 7,
                 '0xa8': 8,
                 '0xa9': 9,
                 '0xaa': 10,
                 '0xab': 11,
                 '0xac': 12,
                 '0xad': 13,
                 '0xae': 14,
                 '0xaf': 15,
                 '0xb0': 16,
                 '0xb1': 17,
                 '0xb2': 18,
                 '0xb3': 19,
                 '0xb4': 20,
                 '0xb5': 21,
                 '0xb6': 22,
                 '0xb7': 23,
                 '0xb8': 24,
                 '0xb9': 25,
                 '0xba': 26,
                 '0xbb': 27,
                 '0xbc': 28,
                 '0xbd': 29,
                 '0xbe': 30,
                 '0xbf': 31
                            }
                ```
                
            - 16 초과 시
                - 16비트(2byte) - `0xda`
                - 32비트(4byte) - `0xdb`
                - 그런 다음 바로 뒤에 문자열의 길이를 나타내는 2바이트 또는 4바이트가 오고, 그 뒤에 문자열 데이터가 온다.

<br>
<br>

## 실전!

```python
{
    "partyName": "book study",
    "round": 4,
    "members": ["Kim", "Park", "Lim", "Song"] 
}

===> 

83a970617274794e616d65aa626f6f6b207374756479a5726f756e6404a76d656d6265727394a34b696da45061726ba34c696da4536f6e67

```

- 핵심은 “앞에서부터” + “2글자씩” 해석하는 것
    - 16진수로!
        
- 83
    - 8 → 맵(객체)를 나타냄
    - 3 → 3개의 키값 쌍이 있음을 의미
- a9
    - a → 문자열
    - 9 → 길이(바이트)가 9임
- 70617274794e616d65
    - “partyName”
    - 2글자씩 아스키 코드에 매핑해서 나타냄
- aa
    - a → 문자열
    - a → 길이(바이트)가 10임
- 626f6f6b207374756479
    - “book study”
- a5
    - 이하 동문
- 726f756e64
    - “round”
- 04
    - “round”에 대응하는 값.
    - 만약 더 큰 값이었다면?
- 94
    - 9x → 고정 길이 배열을 나타냄.
    - x 가 4이므로 4개의 요소를 가진 배열임.